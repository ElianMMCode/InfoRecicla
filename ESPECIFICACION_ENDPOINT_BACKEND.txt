â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘         ESPECIFICACIÃ“N DEL ENDPOINT PARA BÃšSQUEDA DE MATERIALES             â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ“Œ ENDPOINT QUE LA VISTA ESPERA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

URL: GET /api/catalogo/materiales/buscar

Query Parameters (todos OPCIONALES):
  - texto: string (bÃºsqueda por nombre/descripciÃ³n)
  - categoria: string (nombre de categorÃ­a)
  - tipo: string (nombre de tipo)

Ejemplos:
  GET /api/catalogo/materiales/buscar
  GET /api/catalogo/materiales/buscar?texto=botella
  GET /api/catalogo/materiales/buscar?categoria=PlÃ¡stico
  GET /api/catalogo/materiales/buscar?texto=botella&categoria=PlÃ¡stico&tipo=PET


ğŸ“Š RESPUESTA ESPERADA (JSON Array)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Status: 200 OK
Content-Type: application/json

Formato:
[
  {
    "id": "material_id_unique",
    "nombre": "Nombre del Material",
    "unidad": "unidad de medida",
    "categoria": "nombre de categorÃ­a"
  },
  ...
]

Ejemplo COMPLETO:
[
  {
    "id": "mat_001",
    "nombre": "Botella PET 2L",
    "unidad": "unidad",
    "categoria": "PlÃ¡stico"
  },
  {
    "id": "mat_002",
    "nombre": "CartÃ³n Ondulado",
    "unidad": "kg",
    "categoria": "Papel"
  },
  {
    "id": "mat_003",
    "nombre": "Vidrio Transparente",
    "unidad": "kg",
    "categoria": "Vidrio"
  }
]

CASO SIN RESULTADOS (Status 200 con array vacÃ­o):
[]


ğŸ”´ ERRORES (Opcionales, pero recomendados)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Status: 500 Internal Server Error
{
  "error": "Mensaje descriptivo del error"
}


â˜• IMPLEMENTACIÃ“N EN SPRING BOOT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

@RestController
@RequestMapping("/api/catalogo")
public class CatalogoController {

    @Autowired
    private MaterialService materialService;

    @GetMapping("/materiales/buscar")
    public ResponseEntity<List<MaterialDTO>> buscarMateriales(
        @RequestParam(required = false, defaultValue = "") String texto,
        @RequestParam(required = false, defaultValue = "") String categoria,
        @RequestParam(required = false, defaultValue = "") String tipo
    ) {
        try {
            List<MaterialDTO> resultados = materialService.buscar(texto, categoria, tipo);
            return ResponseEntity.ok(resultados);
        } catch (Exception e) {
            return ResponseEntity.status(500).build();
        }
    }
}


ğŸ“Œ DTO RECOMENDADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

public class MaterialDTO {
    private String id;           // ID Ãºnico del material
    private String nombre;       // Nombre del material
    private String unidad;       // Unidad de medida (kg, l, unidad, m, m2, etc)
    private String categoria;    // CategorÃ­a del material

    // Constructor
    public MaterialDTO(String id, String nombre, String unidad, String categoria) {
        this.id = id;
        this.nombre = nombre;
        this.unidad = unidad;
        this.categoria = categoria;
    }

    // Getters y Setters
    public String getId() { return id; }
    public void setId(String id) { this.id = id; }

    public String getNombre() { return nombre; }
    public void setNombre(String nombre) { this.nombre = nombre; }

    public String getUnidad() { return unidad; }
    public void setUnidad(String unidad) { this.unidad = unidad; }

    public String getCategoria() { return categoria; }
    public void setCategoria(String categoria) { this.categoria = categoria; }
}


ğŸ” IMPLEMENTACIÃ“N DEL SERVICE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

@Service
public class MaterialService {

    @Autowired
    private MaterialRepository materialRepository;

    public List<MaterialDTO> buscar(String texto, String categoria, String tipo) {
        // 1. Construir la especificaciÃ³n de bÃºsqueda
        // 2. Buscar en BD
        // 3. Mapear a DTOs
        // 4. Retornar

        List<Material> resultados = materialRepository.findAll(); // Simplificado

        // Filtrar por texto
        if (!texto.isEmpty()) {
            resultados = resultados.stream()
                .filter(m -> m.getNombre().toLowerCase().contains(texto.toLowerCase()))
                .collect(Collectors.toList());
        }

        // Filtrar por categorÃ­a
        if (!categoria.isEmpty()) {
            resultados = resultados.stream()
                .filter(m -> m.getCategoria().getNombre().equalsIgnoreCase(categoria))
                .collect(Collectors.toList());
        }

        // Filtrar por tipo
        if (!tipo.isEmpty()) {
            resultados = resultados.stream()
                .filter(m -> m.getTipo().getNombre().equalsIgnoreCase(tipo))
                .collect(Collectors.toList());
        }

        // Mapear a DTO
        return resultados.stream()
            .map(m -> new MaterialDTO(
                m.getId().toString(),
                m.getNombre(),
                m.getUnidadMedida(),
                m.getCategoria().getNombre()
            ))
            .collect(Collectors.toList());
    }
}


âœ… VERIFICAR QUE FUNCIONA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Arranca la app
2. Navega a: /punto-eca/[punto]/materiales
3. Abre consola (F12)
4. Haz click en "AGREGAR"
5. En consola deberÃ­as ver:
   âœ“ Click en AGREGAR
   âœ“ Buscando en: /api/catalogo/materiales/buscar
   âœ“ Respuesta status: 200
   âœ“ Datos recibidos: [...]
6. Los materiales deberÃ­an aparecer en el modal


ğŸ› DEPURACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Si ves "Respuesta status: 404":
  â†’ El endpoint no existe o la ruta es incorrecta
  â†’ Verifica que estÃ© en @RestController @RequestMapping("/api/catalogo")

Si ves error de CORS:
  â†’ AÃ±ade @CrossOrigin en el controller

Si ves "Sin resultados":
  â†’ La query devuelve lista vacÃ­a
  â†’ Verifica que hay materiales en BD
  â†’ Revisa los filtros de bÃºsqueda

Si la lista es nula:
  â†’ AsegÃºrate de devolver List, nunca null
  â†’ Siempre retorna al menos []


ğŸ’¡ NOTAS IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Los parÃ¡metros son OPCIONALES (por defecto = "")
âœ“ Si estÃ¡n vacÃ­os, NO filtrar por eso (devolver todos)
âœ“ Siempre devuelve array ([] si no hay resultados)
âœ“ Los campos id, nombre, unidad, categoria son REQUERIDOS
âœ“ Status siempre 200 OK (excepto errores reales)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Una vez implementado este endpoint, TODO FUNCIONARÃ PERFECTO.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

