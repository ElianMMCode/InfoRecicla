<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnóstico Select2</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" rel="stylesheet" />
    <style>
        .log-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
            padding: 1rem;
            font-family: monospace;
            max-height: 400px;
            overflow-y: auto;
        }
        .log-entry {
            margin: 0.25rem 0;
            font-size: 0.875rem;
        }
        .log-ok { color: green; }
        .log-error { color: red; }
        .log-warn { color: orange; }
        .log-info { color: blue; }
    </style>
</head>
<body class="bg-light">
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <h1 class="mb-4">Diagnóstico Select2</h1>

                <div class="card mb-4">
                    <div class="card-header">
                        <h5>Prueba de Select2</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="testSelect" class="form-label">Select2 de prueba</label>
                            <select id="testSelect" class="form-select" style="width: 100%;">
                                <option value="">-- Selecciona una opción --</option>
                                <option value="opcion1">Opción 1</option>
                                <option value="opcion2">Opción 2</option>
                                <option value="opcion3">Opción 3</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h5>Log de Diagnóstico</h5>
                    </div>
                    <div class="card-body">
                        <div class="log-box" id="logBox"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Select2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <!-- Select2 Locale ES -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/i18n/es.js"></script>

    <script>
        const logBox = document.getElementById('logBox');

        function log(message, type = 'info') {
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logBox.appendChild(entry);
            logBox.scrollTop = logBox.scrollHeight;
            console.log(`[${type}] ${message}`);
        }

        log('Página cargada');

        // Verificaciones
        log(`jQuery disponible: ${!!window.jQuery}`, window.jQuery ? 'ok' : 'error');
        log(`jQuery versión: ${window.jQuery ? window.jQuery.fn.jquery : 'N/A'}`, 'info');
        log(`Select2 disponible: ${!!window.jQuery && !!window.jQuery.fn.select2}`, (window.jQuery && window.jQuery.fn.select2) ? 'ok' : 'error');

        document.addEventListener('DOMContentLoaded', function() {
            log('DOMContentLoaded disparado');

            try {
                const $select = $('#testSelect');
                log(`Select encontrado: ${$select.length > 0}`, $select.length > 0 ? 'ok' : 'error');

                if (window.jQuery.fn.select2) {
                    log('Inicializando Select2...');
                    $select.select2({
                        theme: 'bootstrap-5',
                        placeholder: 'Selecciona una opción',
                        allowClear: true,
                        language: 'es'
                    });
                    log('✅ Select2 inicializado correctamente', 'ok');
                } else {
                    log('❌ Select2 no disponible', 'error');
                }
            } catch(error) {
                log(`❌ Error: ${error.message}`, 'error');
            }
        });
    </script>
</body>
</html>

